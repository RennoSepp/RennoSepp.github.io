<!DOCTYPE html>
<html lang="en">

<head>
    <!--<meta http-equiv="refresh" content="0; URL=https://rennosepp.github.io/log.html"/>-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script async src="https://api.glia.com/salemove_integration.js"></script>
	<script>
		console.log("Code snippet is loading.");
		sm.getApi({version: 'v1'}).then(function(api) {
			console.log("API call successful");
  const customCard = message => {
    return `
          <div
            class="custom-card"
            style="border: 1px solid black; padding: 10px;"
          >
            <h4
              class="custom-card-title"
              style="color: #1cce90;"
              title="With colors"
            >
              Custom Card Image PROOV
            </h4>
            <br/>
            <img
              class="custom-card-image"
              style="width: 200px;"
              src="https://storage/example.gif"
              alt="Some picture"
              title="With a sample image"
            />
            <br/>
            <br/>
            <h4
              class="custom-card-title"
              style="color: #670405;"
            >
              Custom Card JSON message
            </h4>
            <textarea
              class="custom-card-message-area"
              style="border: none; color: #05505c; width: 190px; font-size: 10px; line-height: 1"
            >
              ${JSON.stringify(message, undefined, 2)}
            </textarea>
          </div>
        `;
  };

  const createCustomCard = function(metadata) {
    const element = document.createElement('div');
console.log("We are creating the custom card");
    element.innerHTML = customCard(metadata);
	  console.log("FINISHED");

    return element.outerHTML;
  };

  api.visitorApp.setChatMessageRenderer(function(message) {
    if (!message.metadata) {
	    console.log("NO");
      return false;
    }
	console.log("YES");
    const customCard = document.createElement('div');
    customCard.innerHTML = createCustomCard(message.metadata);

    return customCard;
  });
});
</script>
    <script>
        window.onload = function(){
  		sm.getApi({version: 'v1'}).then(function(glia) {
  			glia.updateInformation({
				"name": "Glia test",
				"phone":"+10000000000",
    				"customAttributes":{"key":"value"},
    				"externalId": "123-4567-890" // ExternalId can't be 5 chars long
    			}).then(function() {
      				console.log("Successfully updated visitor attributes");
  			}).catch(function(error) {
      				console.log("Failed to set attributes for visitor");
  			});
		});
	};
    </script>
    <meta charset="UTF-8">
    <title>login</title>
    <script type="text/javascript" src="res/js/jsIndex.js"></script>
    <link rel="stylesheet" href="res/css/login.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, inital-scale=1" />
    <script src="res/js/phoneButton.js">
      console.log("Hello world!");
    </script>
</head>

<body>
    <div class="flex-containeer">
        <div>
            <img src="res/images/NoteIt.png" alt="NoteIt">
            <div class="helper">
                <img src="res/images/NoteIt.png" alt="NoteIt">
            </div>
            <h1>Welcome to Penguin Bank!</h1>
            <span class="phone-number"><a href="tel:+37256943333">56943333</a></span>
            <p><a href='index.html'>Create an Account</a></p>
            <p>Or</p>
            <p>Please Log In</p>
            <form>
                <input type="text" placeholder="Email"><br>
                <input type="password" placeholder="Password"><br>
                <input type="button" onclick="window.location='https://rennosepp.github.io/my-baycare-patient-portal.html'" data-sm-show-media-selection-on="click" href="javascript:void(0);" value="Phone" class="phoneEngagementButton" id="button">
            </form>
            <p><a href='index.html'>Forgot password?</a></p>
        </div>
        <div>
  <div id="phoneEngagementButton" class="instructions"></div>
  <button class="cancel">Leave queue</button>
  <div class="queue" queue_name="Phone queue">
    <button id="phoneEngagementTabButton"class="media_button" medium="phone">Call the cool operator</button>
  </div>
</div>
    </div>
</body>

</html>
